# Database Setup Scripts

This folder contains SQL scripts for initializing the databases used in the Ultimate SQL Bootcamp.

## Available Databases

### TPC-H Database (`tpc-h.sql`)
**Purpose**: Business analytics and decision support database  
**Tables**: 8 core tables (customer, orders, lineitem, part, supplier, nation, region, partsupp)  
**Use Case**: Advanced SQL exercises, complex joins, business intelligence queries

**Setup**:
```bash
# Using SQL Runner (recommended)
poetry run python sql_runner.py --setup

# Manual setup
duckdb data/tpc-h.db < database/tpc-h.sql
```

### Star Wars Database (`starwars.sql`)
**Purpose**: Engaging learning database with familiar content  
**Tables**: 17 tables covering characters, films, planets, species, starships, vehicles  
**Use Case**: Basic to intermediate SQL exercises, fun data exploration

**Setup**:
```bash
# Manual setup (database usually pre-created)
duckdb data/starwars.db < database/starwars.sql
```

**Note**: The `starwars.sql` file is automatically generated by `tools/generate_swapi_sql.py` from the JSON data in `data/star-wars/`.

## Database Documentation

For detailed schema information, see:
- [TPC-H Database Schema](../docs/TPC-H_DATABASE_SCHEMA.md)
- [Star Wars Database Schema](../docs/STARWARS_DATABASE_SCHEMA.md)
- [Database Overview](../docs/DATABASE_SCHEMAS.md)

## Usage by Section

- **Sections 3-5**: Use Star Wars database for engaging, understandable examples
- **Section 6**: Use TPC-H database for realistic business scenarios and complex queries

## Regenerating Star Wars Database

If you need to regenerate the Star Wars database:

```bash
# 1. Extract fresh data from SWAPI (optional)
poetry run python tools/swapi_data.py

# 2. Enrich the JSON data (optional)  
poetry run python tools/resolve_references.py

# 3. Generate the SQL script
poetry run python tools/generate_swapi_sql.py

# 4. Create the database
duckdb data/starwars.db < database/starwars.sql
```

## File Sizes

- `tpc-h.sql`: ~1.5MB (includes sample data)
- `starwars.sql`: ~500KB (includes all Star Wars data)

Both files include both schema creation (DDL) and data insertion (DML) statements.